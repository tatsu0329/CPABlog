# 過去問表示方式の提案

## 📋 検討すべき方式

### 1. **ハイブリッド方式（推奨）⭐**
**概要**: 過去問一覧ページ + 年度別詳細ページ + PDFダウンロード

#### 構成
```
/past-exams (過去問一覧)
  ├── /tandoku (短答式過去問一覧)
  │   ├── /2025 (2025年度詳細)
  │   ├── /2024 (2024年度詳細)
  │   └── ...
  ├── /ronbun (論文式過去問一覧)
  └── /shuryo (修了考査過去問一覧)
```

#### メリット
- ✅ ユーザーが探しやすい（年度・科目で絞り込み可能）
- ✅ SEOに有利（各年度が独立したページ）
- ✅ モバイル対応しやすい
- ✅ PDFもダウンロード可能
- ✅ 検索機能を追加しやすい

#### 実装方法
- Next.jsの動的ルーティングを使用
- 各年度のデータをJSONまたはMarkdownで管理
- PDFファイルは`/public/past-exams/`に配置

---

### 2. **PDF埋め込み方式**
**概要**: PDFをブラウザ内で直接表示

#### メリット
- ✅ 元の形式を保持
- ✅ 実装が簡単
- ✅ 印刷しやすい

#### デメリット
- ❌ モバイルでの表示が難しい
- ❌ 検索ができない
- ❌ アクセシビリティが低い

#### 実装方法
```tsx
<iframe src="/past-exams/tandoku/2025.pdf" />
// または
<embed src="/past-exams/tandoku/2025.pdf" />
```

---

### 3. **HTML形式で完全再現**
**概要**: PDFをHTMLに変換して表示

#### メリット
- ✅ レスポンシブ対応
- ✅ 検索可能
- ✅ アクセシビリティが良い
- ✅ モバイルで見やすい

#### デメリット
- ❌ PDF→HTML変換の手作業が必要
- ❌ 複雑な表や図の再現が難しい
- ❌ メンテナンスコストが高い

---

### 4. **画像形式（PNG/JPEG）**
**概要**: PDFを画像に変換して表示

#### メリット
- ✅ 実装が簡単
- ✅ 元の見た目を保持

#### デメリット
- ❌ ファイルサイズが大きい
- ❌ 検索不可
- ❌ アクセシビリティが低い
- ❌ モバイルでの読み込みが遅い

---

## 🎯 推奨実装（ハイブリッド方式）

### ディレクトリ構造
```
/public
  /past-exams
    /tandoku
      /2025
        - questions.pdf
        - answers.pdf
      /2024
        - questions.pdf
        - answers.pdf
    /ronbun
    /shuryo

/app
  /past-exams
    /tandoku
      /[year]
        - page.tsx (年度別詳細ページ)
      - page.tsx (短答式過去問一覧)
    /ronbun
    /shuryo
    - page.tsx (過去問トップページ)
```

### データ構造（JSON例）
```json
{
  "tandoku": [
    {
      "year": 2025,
      "period": "第Ⅰ回",
      "date": "2025-12-14",
      "subjects": ["財務会計論", "管理会計論", "監査論", "企業法"],
      "pdf": {
        "questions": "/past-exams/tandoku/2025/questions.pdf",
        "answers": "/past-exams/tandoku/2025/answers.pdf"
      },
      "summary": "2025年第Ⅰ回短答式試験の問題と解答"
    }
  ]
}
```

### 機能
1. **過去問一覧ページ**
   - 年度・科目でフィルタリング
   - 検索機能
   - 年度順/科目順でソート

2. **年度別詳細ページ**
   - 問題の概要
   - PDFダウンロードボタン
   - 主要問題のHTML表示（オプション）
   - 解答へのリンク

3. **PDFビューアー（オプション）**
   - ブラウザ内でPDFを表示
   - ダウンロードボタン

---

## 💡 実装の優先順位

### Phase 1（最小実装）
- 過去問一覧ページ
- 年度別ページ（PDFダウンロードリンクのみ）
- 基本的なフィルタリング

### Phase 2（拡張）
- PDF埋め込みビューアー
- 検索機能
- 主要問題のHTML表示

### Phase 3（高度な機能）
- 問題のタグ付け
- 出題傾向の分析
- お気に入り機能

---

## 🔧 技術的な考慮事項

### PDFの扱い
- **ファイルサイズ**: 圧縮を検討
- **ストレージ**: `/public`フォルダまたはCDN
- **ライセンス**: 公式PDFの利用規約を確認

### パフォーマンス
- PDFの遅延読み込み
- 画像の最適化
- ページネーション

### アクセシビリティ
- PDFの代替テキスト
- キーボードナビゲーション
- スクリーンリーダー対応

---

## ⚖️ 法的な注意事項（重要）

### 著作権について

公認会計士試験の過去問は、**公認会計士・監査審査会**（金融庁）が作成・公開しています。

#### リスクのある行為
- ❌ **公式PDFを自サイトにアップロードして再配布**
  - 著作権侵害の可能性
  - 利用規約違反の可能性
- ❌ **PDFをHTMLに変換して再現**
  - 著作権侵害の可能性
- ❌ **公式PDFを改変・編集**
  - 著作権侵害の可能性

#### 安全な方法
- ✅ **公式サイトへのリンクを提供**
  - 最も安全な方法
  - 利用規約違反のリスクが低い
- ✅ **公式PDFをiframeで埋め込み（公式URLを直接参照）**
  - PDFを自サイトに保存しない
  - 公式サイトのURLを直接参照
- ✅ **公式サイトの利用規約を確認してから実装**

### 推奨される安全な実装方法

#### 方法A: 公式サイトへのリンク集（最も安全）⭐

```tsx
// 公式サイトへのリンクのみを提供
<a href="https://www.fsa.go.jp/cpaaob/kouninkaikeishi-shiken/..." 
   target="_blank" 
   rel="noopener noreferrer">
  公式サイトで過去問を確認
</a>
```

**メリット**:
- ✅ 法的リスクが最小
- ✅ 実装が簡単
- ✅ 常に最新情報を提供

**デメリット**:
- ❌ ユーザーが公式サイトに移動する必要がある
- ❌ サイト内で完結しない

---

#### 方法B: 公式PDFをiframeで埋め込み（公式URL参照）

```tsx
// 公式サイトのPDFを直接参照（自サイトに保存しない）
<iframe 
  src="https://www.fsa.go.jp/cpaaob/kouninkaikeishi-shiken/.../questions.pdf"
  width="100%"
  height="600px"
/>
```

**メリット**:
- ✅ サイト内で表示可能
- ✅ PDFを自サイトに保存しないためリスクが低い
- ✅ 常に最新版を表示

**注意点**:
- ⚠️ 公式サイトの利用規約を確認
- ⚠️ CORS（クロスオリジン）の制限がある可能性
- ⚠️ 公式サイトのURLが変更される可能性

---

#### 方法C: 公式サイトの利用規約確認後の実装

1. **公式サイトの利用規約を確認**
   - 公認会計士・監査審査会のサイト
   - 日本公認会計士協会のサイト

2. **許可されている場合のみ実装**
   - PDFのダウンロードリンク
   - PDFの埋め込み表示

3. **出典を明示**
   - 「出典：公認会計士・監査審査会」を明記
   - 公式サイトへのリンクを提供

---

## 🔒 推奨実装（法的に安全な方法）

### Phase 1: 公式サイトへのリンク集（推奨）

```tsx
// 過去問一覧ページ
{
  "tandoku": [
    {
      "year": 2025,
      "period": "第Ⅰ回",
      "date": "2025-12-14",
      "officialLinks": {
        "questions": "https://www.fsa.go.jp/cpaaob/kouninkaikeishi-shiken/...",
        "answers": "https://www.fsa.go.jp/cpaaob/kouninkaikeishi-shiken/..."
      }
    }
  ]
}
```

**実装内容**:
- 過去問一覧ページ（年度・科目で整理）
- 各年度の公式サイトへのリンク
- 出典の明記
- 「公式サイトで確認」ボタン

**メリット**:
- ✅ 法的リスクが最小
- ✅ 実装が簡単
- ✅ 常に最新情報
- ✅ 公式サイトへのトラフィック増加（協会側にもメリット）

---

### Phase 2: 公式PDFのiframe埋め込み（利用規約確認後）

利用規約で許可されている場合のみ実装

---

## 📋 実装前のチェックリスト

- [ ] 公認会計士・監査審査会の利用規約を確認
- [ ] 日本公認会計士協会の利用規約を確認
- [ ] 必要に応じて問い合わせ（メール・電話）
- [ ] 出典を明記する準備
- [ ] 公式サイトへのリンクを提供する準備

---

## 📝 最終推奨事項

**最初は「公式サイトへのリンク集」から始めることを強く推奨します。**

理由：
1. **法的リスクが最小**
2. 実装が簡単
3. 常に最新情報を提供
4. 公式サイトへの適切な誘導

PDFを自サイトに保存する方法は、**利用規約で明示的に許可されている場合のみ**実装してください。

この安全な方法で実装を進めますか？

