# データディレクトリの構造

このディレクトリには、サイトで使用するデータファイルが格納されています。

## 📁 ディレクトリ構造

```
data/
  ├── jissen-hoshu/              # 実務補習関連のデータ
  │   └── dai8kai/               # 第8回考査
  │       └── kansa/            # 監査総合グループ
  │           ├── 2025.json
  │           ├── 2024.json
  │           ├── 2023.json
  │           └── 2022.json
  └── templates/                 # テンプレートファイル
      └── question-template.json # 問題集のテンプレート
```

## 📝 データ形式

### 問題集のJSON形式

各年度の問題集は、以下の形式のJSONファイルです：

```json
{
  "category": {
    "exam": "監査第8回考査"
  },
  "questions": [
    {
      "id": "No.1",
      "question": "問題文",
      "choices": [
        {
          "label": "A",
          "text": "選択肢の内容"
        }
      ],
      "answer": "A",
      "explanation": "解説"
    }
  ]
}
```

### フィールドの詳細

#### `category`
- `exam`: 試験の種類（例: "監査第8回考査"）

#### `questions` (配列)
各問題オブジェクトには以下のフィールドがあります：

- **`id`** (必須): 問題番号（例: "No.1", "No.2"）
- **`question`** (必須): 問題文
  - 改行は `\\n` で表現
  - HTMLタグ（`<u>`, `<strong>`など）を使用可能
- **`choices`** (必須): 選択肢の配列
  - 単一選択: `{ "label": "A", "text": "選択肢の内容" }`
  - 複数選択: `{ "label": "1", "subChoices": [...] }`
- **`answer`** (必須): 正答
  - 単一選択: "A", "B", "C", "D" など
  - 複数選択: "1A,2B" のようにカンマ区切り
- **`explanation`** (任意): 解説
  - 空文字列 `""` または `null` も可
  - 改行は `\\n` で表現

## 🔍 データの追加方法

### 新しい年度の問題集を追加する場合

1. `data/jissen-hoshu/dai8kai/kansa/` に新しいJSONファイルを作成
2. ファイル名は年度（例: `2026.json`）
3. `data/templates/question-template.json` をコピーして編集
4. 詳細は `HOW_TO_ADD_QUESTIONS.md` を参照

### 新しい試験カテゴリを追加する場合

1. `data/jissen-hoshu/` 以下に新しいディレクトリを作成
2. 同じJSON形式で問題データを作成
3. 対応するAPIルートとページを作成
4. 詳細は `HOW_TO_ADD_QUESTIONS.md` を参照

## ⚠️ 注意事項

### JSONの形式

- **エンコーディング**: UTF-8で保存
- **改行**: `\\n` で表現（実際の改行文字は使用しない）
- **タブ文字**: 使用しない（エラーになる可能性がある）
- **カンマ**: 最後の要素の後にカンマを付けない
- **引用符**: 文字列内の `"` は `\"` でエスケープ

### よくあるエラー

1. **制御文字エラー**: タブ文字（`\t`）が含まれている
   - 解決: タブを削除し、必要に応じて `\\n` で改行に置き換え

2. **カンマエラー**: 最後の要素の後にカンマがある
   ```json
   // ❌ 間違い
   {
     "field": "value",
   }
   
   // ✅ 正しい
   {
     "field": "value"
   }
   ```

3. **引用符エラー**: 文字列内の引用符がエスケープされていない
   ```json
   // ❌ 間違い
   {
     "text": "He said "hello""
   }
   
   // ✅ 正しい
   {
     "text": "He said \"hello\""
   }
   ```

## 🧪 データの検証

JSONファイルが正しい形式か確認する方法：

1. **構文チェック**: JSONバリデーターを使用
2. **ビルド確認**: `npm run build` でエラーがないか確認
3. **開発サーバー**: `npm run dev` で実際に表示を確認

## 📚 関連ドキュメント

- 問題集の追加方法: `HOW_TO_ADD_QUESTIONS.md`
- 記事の追加方法: `HOW_TO_ADD_ARTICLES.md`
- テンプレート: `templates/question-template.json`


